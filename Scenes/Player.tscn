[gd_scene load_steps=7 format=3 uid="uid://cxb3gc5wk7mqb"]

[ext_resource type="Script" path="res://Scripts/Player.gd" id="1_6ghh2"]
[ext_resource type="Script" path="res://Scripts/ShadowProjector.gd" id="2_htr7a"]
[ext_resource type="Texture2D" uid="uid://6e7woru0fgqs" path="res://Textures/DropShadow.png" id="2_jeg5y"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://Models/sophia/sophia_skin.tscn" id="2_v4a5x"]
[ext_resource type="AudioStream" uid="uid://fbkk18nhwe4y" path="res://Audio/Jump.mp3" id="5_48co5"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_f65h8"]
radius = 0.35
height = 1.4

[node name="Player" type="CharacterBody3D"]
process_mode = 1
collision_layer = 2
script = ExtResource("1_6ghh2")
auto_sprint = true
walk_speed = 6.5
walk_speed_when_jumping = 5.0
sprint_speed = 11.0
sprint_speed_when_jumping = 7.0
jump_height = 2.5
jump_time_to_ascend = 0.35
jump_time_to_descend = 0.25
stomp_speed = 0.0
stomp_gravity = 500.0
acceleration = 5.0
controller_sensitivity = 2.5
angular_acceleration = 10.0
sprint_particles_enabled = true

[node name="CollisionShape" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, 0)
shape = SubResource("CapsuleShape3D_f65h8")

[node name="SophiaSkin" parent="." instance=ExtResource("2_v4a5x")]

[node name="CameraPivotHorizontal" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.8, 0)

[node name="CameraPivotVertical" type="Node3D" parent="CameraPivotHorizontal"]

[node name="SpringArm3D" type="SpringArm3D" parent="CameraPivotHorizontal/CameraPivotVertical"]
spring_length = 3.0

[node name="Camera" type="Camera3D" parent="CameraPivotHorizontal/CameraPivotVertical/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3)

[node name="ShadowProjectorManager" type="Node3D" parent="."]
script = ExtResource("2_htr7a")

[node name="ShadowProjectors" type="Node3D" parent="ShadowProjectorManager"]

[node name="ShadowProjectorLeft" type="RayCast3D" parent="ShadowProjectorManager/ShadowProjectors"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 0.25, 0)
target_position = Vector3(0, -15, 0)

[node name="ShadowProjectorRight" type="RayCast3D" parent="ShadowProjectorManager/ShadowProjectors"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0.25, 0)
target_position = Vector3(0, -15, 0)

[node name="ShadowProjectorFront" type="RayCast3D" parent="ShadowProjectorManager/ShadowProjectors"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25, -0.3)
target_position = Vector3(0, -15, 0)

[node name="ShadowProjectorBack" type="RayCast3D" parent="ShadowProjectorManager/ShadowProjectors"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25, 0.6)
target_position = Vector3(0, -15, 0)

[node name="ShadowDecal" type="Decal" parent="ShadowProjectorManager"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0.25, 0)
size = Vector3(2, 5, 2)
texture_albedo = ExtResource("2_jeg5y")
cull_mask = 1048573

[node name="JumpParticleRayCast" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25, 0)

[node name="AudioStreamPlayer" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("5_48co5")
